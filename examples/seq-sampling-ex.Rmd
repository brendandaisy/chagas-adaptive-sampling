---
title: Sequential Sampling Examples
subtitle: Using the provided functions for sequential sampling
author: B. K. M. Case
date: April 7, 2022
output: pdf_document
---

Example of using some of the functions from this study. 
Please note, however, that this code was not intended to work on other datasets and would require minor changes to do so.

### Load required packages and the data

```{r, include=FALSE}
source("code/sequential-sampling.R")
```

Here we will use the data from the village El Paternito:
```{r, include=FALSE}
dat_org <- read_csv("anon-survey-data.csv")
dat_sub <- filter(dat_org, village == 'Paternito')
```

### The `sampling_design` function

This function will take care of most of the required setup for us, so we can skip the usual steps of using SPDE and get results right away.

```{r}
design <- sampling_design(dat_sub, init=30, pred="known", silent=FALSE, strat_arg=list(alpha=0.5))
```

Here, we have used adaptive sampling with an initial sample of 30 houses, the globally available covariates, and exploration parameter $\alpha=1$. 
We have also set `silent=FALSE` to print our progress each iteration of the algorithm.

We can leave `strat_arg` empty to use random selection:

```{r}
design_random <- sampling_design(dat_sub, init=30, pred="global")
```

### Scoring the designs

To evaluate the number of houses visited and the true infection rate remaining in the village, we run 

```{r}
design_score(design, dat_sub$truth)
design_score(design_random, dat_sub$truth)
```

The second argument of `design_score` is a vector of the true infection labels in the village.